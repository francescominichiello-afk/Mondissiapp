<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="theme-color" content="#1a2e1a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>EcoRaccolta Â· Cazzago 2026</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:      #1a2e1a;
      --crema:   #f5f0e8;
      --oro:     #c8a84b;
      --verde:   #2d6a2d;
      --c-org:   #c8941a;
      --c-sec:   #8a9ba8;
      --c-car:   #4a9fd4;
      --c-pla:   #e07b30;
      --c-vet:   #3cb370;
      --c-vrd:   #5dade2;
    }
    * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
    body { font-family:'DM Sans',sans-serif; background:var(--bg); color:var(--crema); min-height:100vh; }

    /* HEADER */
    .header {
      position:fixed; top:0; left:0; right:0; z-index:200;
      background:var(--bg); border-bottom:1px solid rgba(200,168,75,.25);
      padding:14px 18px 10px;
    }
    .header-row { display:flex; align-items:center; justify-content:space-between; }
    .header-title { font-family:'Playfair Display',serif; font-size:20px; font-weight:900; letter-spacing:-.5px; }
    .header-title span { color:var(--oro); }
    .header-sub { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:rgba(245,240,232,.45); margin-top:2px; }
    .notif-btn {
      background:rgba(200,168,75,.12); border:1px solid rgba(200,168,75,.4);
      color:var(--oro); border-radius:50%; width:40px; height:40px;
      display:flex; align-items:center; justify-content:center;
      font-size:17px; cursor:pointer; transition:.2s; flex-shrink:0;
    }
    .notif-btn.active { background:rgba(200,168,75,.28); border-color:var(--oro); }
    .notif-btn:active { transform:scale(.9); }

    main { padding-top:82px; }

    /* PROSSIMA */
    .prossima-box {
      margin:16px 16px 0;
      background:linear-gradient(135deg,rgba(45,106,45,.45),rgba(26,46,26,.7));
      border:1px solid rgba(200,168,75,.3); border-radius:18px; padding:18px 18px 14px;
      position:relative; overflow:hidden;
    }
    .prossima-box::after {
      content:''; position:absolute; top:-30px; right:-30px; width:100px; height:100px;
      background:radial-gradient(circle,rgba(200,168,75,.18),transparent 70%); border-radius:50%;
    }
    .prossima-label { font-size:9px; letter-spacing:3px; text-transform:uppercase; color:rgba(245,240,232,.4); margin-bottom:6px; }
    .prossima-data { font-family:'Playfair Display',serif; font-size:14px; color:var(--oro); letter-spacing:.5px; margin-bottom:4px; }
    .prossima-msg { font-size:13px; color:rgba(245,240,232,.6); margin-bottom:12px; }
    .chips { display:flex; flex-wrap:wrap; gap:6px; }
    .chip { display:flex; align-items:center; gap:5px; padding:5px 11px; border-radius:20px; font-size:11px; font-weight:500; }
    .chip-dot { width:7px; height:7px; border-radius:50%; flex-shrink:0; }

    /* NAV MESI */
    .mesi-nav { display:flex; overflow-x:auto; gap:8px; padding:14px 16px 0; scrollbar-width:none; }
    .mesi-nav::-webkit-scrollbar { display:none; }
    .mese-tab {
      flex-shrink:0; background:rgba(45,106,45,.12); border:1px solid rgba(200,168,75,.12);
      border-radius:20px; padding:7px 14px; font-size:12px; font-weight:500;
      color:rgba(245,240,232,.55); cursor:pointer; transition:.2s; white-space:nowrap;
    }
    .mese-tab.corrente { border-color:rgba(76,175,80,.5); color:rgba(245,240,232,.85); }
    .mese-tab.attivo { background:rgba(200,168,75,.2); border-color:var(--oro); color:var(--oro); }
    .mese-tab.vuoto { opacity:.35; }

    /* CALENDARIO */
    .cal-section { padding:12px 16px 32px; }
    .cal-titolo { font-family:'Playfair Display',serif; font-size:22px; font-weight:700; color:var(--crema); margin-bottom:14px; margin-top:4px; }

    .giorno-row {
      display:flex; align-items:center; gap:12px;
      background:rgba(45,106,45,.07); border:1px solid rgba(200,168,75,.08);
      border-radius:14px; padding:12px 14px; margin-bottom:8px;
    }
    .giorno-row.oggi-row { border-color:rgba(200,168,75,.45); background:rgba(200,168,75,.08); }
    .giorno-row.passato { opacity:.35; }
    .data-col { min-width:42px; text-align:center; }
    .data-num { font-family:'Playfair Display',serif; font-size:24px; font-weight:700; line-height:1; color:var(--crema); }
    .data-nome { font-size:9px; text-transform:uppercase; letter-spacing:1px; color:rgba(245,240,232,.4); margin-top:2px; }
    .oggi-badge { font-size:8px; text-transform:uppercase; letter-spacing:1px; color:var(--oro); background:rgba(200,168,75,.18); border-radius:4px; padding:2px 5px; margin-top:3px; display:inline-block; }
    .sep { width:1px; height:36px; background:rgba(200,168,75,.18); flex-shrink:0; }
    .tipi-col { flex:1; display:flex; flex-wrap:wrap; gap:5px; }
    .mini-chip { display:flex; align-items:center; gap:4px; padding:4px 9px; border-radius:12px; font-size:10px; font-weight:500; }
    .mini-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; }

    /* LEGENDA */
    .legenda { margin:0 16px 20px; display:grid; grid-template-columns:1fr 1fr; gap:7px; }
    .leg-item { background:rgba(45,106,45,.08); border:1px solid rgba(200,168,75,.1); border-radius:11px; padding:10px 12px; display:flex; align-items:center; gap:9px; }
    .leg-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
    .leg-nome { font-size:11px; font-weight:500; }
    .leg-freq { font-size:9px; color:rgba(245,240,232,.4); margin-top:1px; }

    /* VUOTO */
    .mese-vuoto { color:rgba(245,240,232,.35); font-size:13px; margin-top:8px; line-height:1.6; }

    /* TOAST */
    .toast {
      position:fixed; bottom:28px; left:50%;
      transform:translateX(-50%) translateY(100px);
      background:var(--verde); border:1px solid rgba(200,168,75,.4);
      color:var(--crema); padding:11px 20px; border-radius:40px;
      font-size:13px; font-weight:500; z-index:999; white-space:nowrap;
      box-shadow:0 8px 32px rgba(0,0,0,.4);
      transition:transform .4s cubic-bezier(.34,1.56,.64,1);
    }
    .toast.show { transform:translateX(-50%) translateY(0); }
  </style>
</head>
<body>

<header class="header">
  <div class="header-row">
    <div>
      <div class="header-title">Eco<span>Raccolta</span></div>
      <div class="header-sub">Cazzago Â· Pianiga Â· Veritas 2026</div>
    </div>
    <button class="notif-btn" id="notifBtn" onclick="toggleNotifiche()">ğŸ””</button>
  </div>
</header>

<main>
  <div class="prossima-box">
    <div class="prossima-label">Prossima raccolta</div>
    <div class="prossima-data" id="prossimaData"></div>
    <div class="prossima-msg"  id="prossimaMsg"></div>
    <div class="chips"         id="prossimaChips"></div>
  </div>

  <div class="mesi-nav" id="mesiNav"></div>
  <div class="cal-section" id="calSection"></div>

  <div class="legenda">
    <div class="leg-item"><div class="leg-dot" style="background:var(--c-org)"></div><div><div class="leg-nome">Organico</div><div class="leg-freq">Umido organico</div></div></div>
    <div class="leg-item"><div class="leg-dot" style="background:var(--c-sec)"></div><div><div class="leg-nome">Indifferenziato</div><div class="leg-freq">Secco residuo</div></div></div>
    <div class="leg-item"><div class="leg-dot" style="background:var(--c-car)"></div><div><div class="leg-nome">Carta e Cartone</div><div class="leg-freq"></div></div></div>
    <div class="leg-item"><div class="leg-dot" style="background:var(--c-vet)"></div><div><div class="leg-nome">Vetro+Plastica+Lattine</div><div class="leg-freq"></div></div></div>
    <div class="leg-item"><div class="leg-dot" style="background:var(--c-vrd)"></div><div><div class="leg-nome">Verde/Ramaglie</div><div class="leg-freq"></div></div></div>
  </div>
</main>

<div class="toast" id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CALENDARIO PRECISO 2026 - ZONA VERDE (CAZZAGO, PIANIGA)
// Dati inseriti manualmente dall'utente mese per mese
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Chiavi: "ANNO-MESE(0-based)-GIORNO"
// Valori: array di codici materiale
const CALENDARIO = {
  // â”€â”€ MARZO â”€â”€
  "2026-2-2":  ["org"],
  "2026-2-5":  ["org"],
  "2026-2-6":  ["vrd"],
  "2026-2-9":  ["org"],
  "2026-2-10": ["sec"],
  "2026-2-11": ["car"],
  "2026-2-12": ["org"],
  "2026-2-13": ["vet"],
  "2026-2-16": ["org"],
  "2026-2-19": ["org"],
  "2026-2-20": ["vrd"],
  "2026-2-23": ["org"],
  "2026-2-24": ["sec"],
  "2026-2-25": ["car"],
  "2026-2-26": ["org"],
  "2026-2-27": ["vet"],
  "2026-2-30": ["org"],

  // â”€â”€ APRILE â”€â”€
  "2026-3-2":  ["org"],
  "2026-3-3":  ["vrd"],
  "2026-3-6":  ["org"],
  "2026-3-7":  ["sec"],
  "2026-3-8":  ["car"],
  "2026-3-9":  ["org"],
  "2026-3-10": ["vet"],
  "2026-3-13": ["org"],
  "2026-3-16": ["org"],
  "2026-3-17": ["vrd"],
  "2026-3-20": ["org"],
  "2026-3-21": ["sec"],
  "2026-3-22": ["car"],
  "2026-3-23": ["org"],
  "2026-3-24": ["vet"],
  "2026-3-27": ["org"],
  "2026-3-30": ["org"],

  // â”€â”€ MAGGIO â”€â”€
  "2026-4-1":  ["vrd"],
  "2026-4-4":  ["org"],
  "2026-4-5":  ["sec"],
  "2026-4-6":  ["car"],
  "2026-4-7":  ["org"],
  "2026-4-8":  ["vet"],
  "2026-4-11": ["org"],
  "2026-4-14": ["org"],
  "2026-4-15": ["vrd"],
  "2026-4-18": ["org"],
  "2026-4-19": ["sec"],
  "2026-4-20": ["car"],
  "2026-4-21": ["org"],
  "2026-4-22": ["vet"],
  "2026-4-25": ["org"],
  "2026-4-28": ["org"],
  "2026-4-29": ["vrd"],

  // â”€â”€ GIUGNO â”€â”€
  "2026-5-1":  ["org"],
  "2026-5-2":  ["sec"],
  "2026-5-3":  ["car"],
  "2026-5-4":  ["org"],
  "2026-5-5":  ["vet"],
  "2026-5-8":  ["org"],
  "2026-5-11": ["org"],
  "2026-5-12": ["vrd"],
  "2026-5-15": ["org"],
  "2026-5-16": ["sec"],
  "2026-5-17": ["car"],
  "2026-5-18": ["org"],
  "2026-5-19": ["vet"],
  "2026-5-22": ["org"],
  "2026-5-25": ["org"],
  "2026-5-26": ["vrd"],
  "2026-5-29": ["org"],
  "2026-5-30": ["sec"],

  // â”€â”€ LUGLIO â”€â”€
  "2026-6-1":  ["car"],
  "2026-6-2":  ["org"],
  "2026-6-3":  ["vet"],
  "2026-6-6":  ["org"],
  "2026-6-9":  ["org"],
  "2026-6-10": ["vrd"],
  "2026-6-13": ["org"],
  "2026-6-14": ["sec"],
  "2026-6-15": ["car"],
  "2026-6-16": ["org"],
  "2026-6-17": ["vet"],
  "2026-6-20": ["org"],
  "2026-6-23": ["org"],
  "2026-6-24": ["vrd"],
  "2026-6-27": ["org"],
  "2026-6-28": ["sec"],
  "2026-6-29": ["car"],
  "2026-6-30": ["org"],
  "2026-6-31": ["vet"],

  // â”€â”€ AGOSTO â”€â”€
  "2026-7-3":  ["org"],
  "2026-7-6":  ["org"],
  "2026-7-7":  ["vrd"],
  "2026-7-10": ["org"],
  "2026-7-11": ["sec"],
  "2026-7-12": ["car"],
  "2026-7-13": ["org"],
  "2026-7-14": ["vet"],
  "2026-7-17": ["org"],
  "2026-7-20": ["org"],
  "2026-7-21": ["vrd"],
  "2026-7-24": ["org"],
  "2026-7-25": ["sec"],
  "2026-7-26": ["car"],
  "2026-7-27": ["org"],
  "2026-7-28": ["vet"],
  "2026-7-31": ["org"],

  // â”€â”€ SETTEMBRE â”€â”€
  "2026-8-3":  ["org"],
  "2026-8-4":  ["vrd"],
  "2026-8-7":  ["org"],
  "2026-8-8":  ["sec"],
  "2026-8-9":  ["car"],
  "2026-8-10": ["org"],
  "2026-8-11": ["vet"],
  "2026-8-14": ["org"],
  "2026-8-17": ["org"],
  "2026-8-18": ["vrd"],
  "2026-8-21": ["org"],
  "2026-8-22": ["sec"],
  "2026-8-23": ["car"],
  "2026-8-24": ["org"],
  "2026-8-25": ["vet"],
  "2026-8-28": ["org"],

  // â”€â”€ OTTOBRE â”€â”€
  "2026-9-1":  ["org"],
  "2026-9-2":  ["vrd"],
  "2026-9-5":  ["org"],
  "2026-9-6":  ["sec"],
  "2026-9-7":  ["car"],
  "2026-9-8":  ["org"],
  "2026-9-9":  ["vet"],
  "2026-9-12": ["org"],
  "2026-9-15": ["org"],
  "2026-9-16": ["vrd"],
  "2026-9-19": ["org"],
  "2026-9-20": ["sec"],
  "2026-9-21": ["car"],
  "2026-9-22": ["org"],
  "2026-9-23": ["vet"],
  "2026-9-26": ["org"],
  "2026-9-29": ["org"],
  "2026-9-30": ["vrd"],

  // â”€â”€ NOVEMBRE â”€â”€
  "2026-10-2":  ["org"],
  "2026-10-3":  ["sec"],
  "2026-10-4":  ["car"],
  "2026-10-5":  ["org"],
  "2026-10-6":  ["vet"],
  "2026-10-9":  ["org"],
  "2026-10-12": ["org"],
  "2026-10-13": ["vrd"],
  "2026-10-16": ["org"],
  "2026-10-17": ["sec"],
  "2026-10-18": ["car"],
  "2026-10-19": ["org"],
  "2026-10-20": ["vet"],
  "2026-10-23": ["org"],
  "2026-10-26": ["org"],
  "2026-10-27": ["vrd"],
  "2026-10-30": ["org"],

  // â”€â”€ DICEMBRE â”€â”€
  "2026-11-1":  ["sec"],
  "2026-11-2":  ["car"],
  "2026-11-3":  ["org"],
  "2026-11-4":  ["vet"],
  "2026-11-7":  ["org"],
  "2026-11-10": ["org"],
  "2026-11-11": ["vrd"],
  "2026-11-14": ["org"],
  "2026-11-15": ["sec"],
  "2026-11-16": ["car"],
  "2026-11-17": ["org"],
  "2026-11-18": ["vet"],
  "2026-11-21": ["org"],
  "2026-11-24": ["org"],
  "2026-11-28": ["org"],
  "2026-11-29": ["sec"],
  "2026-11-30": ["car"],
  "2026-11-31": ["org"],
};

function chiave(data) {
  return `${data.getFullYear()}-${data.getMonth()}-${data.getDate()}`;
}

function raccoltaDelGiorno(data) {
  return CALENDARIO[chiave(data)] || [];
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TIPI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TIPI = {
  org: { nome:'Organico',            c:'#c8941a', bg:'rgba(200,148,26,.15)'  },
  sec: { nome:'Indifferenziato',     c:'#8a9ba8', bg:'rgba(138,155,168,.15)' },
  car: { nome:'Carta',               c:'#4a9fd4', bg:'rgba(74,159,212,.15)'  },
  vet: { nome:'Vetro+Plastica+Lat.', c:'#3cb370', bg:'rgba(60,179,112,.15)'  },
  vrd: { nome:'Verde/Ramaglie',      c:'#5dade2', bg:'rgba(93,173,226,.15)'  },
};

const GIORNI_B = ['Dom','Lun','Mar','Mer','Gio','Ven','Sab'];
const GIORNI_L = ['Domenica','LunedÃ¬','MartedÃ¬','MercoledÃ¬','GiovedÃ¬','VenerdÃ¬','Sabato'];
const MESI     = ['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno',
                  'Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'];
// Mesi con dati (0-based)
const MESI_CON_DATI = new Set([2,3,4,5,6,7,8,9,10,11]);

function chipHTML(tipo, mini) {
  const t = TIPI[tipo];
  return `<span class="${mini?'mini-chip':'chip'}" style="background:${t.bg};color:${t.c};border:1px solid ${t.c}44">
    <span class="${mini?'mini-dot':'chip-dot'}" style="background:${t.c}"></span>${t.nome}
  </span>`;
}

// PROSSIMA RACCOLTA
function renderProssima() {
  const oggi = new Date(); oggi.setHours(0,0,0,0);
  for (let i=0; i<=60; i++) {
    const d = new Date(oggi); d.setDate(oggi.getDate()+i);
    if (d.getFullYear() > 2026) break;
    const r = raccoltaDelGiorno(d);
    if (!r.length) continue;
    document.getElementById('prossimaData').textContent =
      `${GIORNI_L[d.getDay()]} ${d.getDate()} ${MESI[d.getMonth()]}`;
    document.getElementById('prossimaMsg').textContent =
      i===0 ? 'ğŸ‘‰ Metti fuori i contenitori oggi!' :
      i===1 ? 'ğŸ• Domani sera metti fuori i contenitori' :
              `ğŸ“… Fra ${i} giorni`;
    document.getElementById('prossimaChips').innerHTML = r.map(t=>chipHTML(t,false)).join('');
    return;
  }
  document.getElementById('prossimaData').textContent = 'Calendario 2026 terminato';
  document.getElementById('prossimaMsg').textContent  = '';
  document.getElementById('prossimaChips').innerHTML  = '';
}

// NAV MESI
let meseVis = Math.max(2, new Date().getMonth()); // parte da marzo se siamo prima

function renderNav() {
  const nav = document.getElementById('mesiNav');
  const meseCor = new Date().getMonth();
  // Se il mese corrente non ha dati, partiamo da marzo
  if (!MESI_CON_DATI.has(meseVis)) meseVis = 2;
  nav.innerHTML = '';
  for (let m=0; m<12; m++) {
    const btn = document.createElement('button');
    const hasDati = MESI_CON_DATI.has(m);
    btn.className = 'mese-tab' +
      (!hasDati ? ' vuoto' : '') +
      (m===meseCor ? ' corrente' : '') +
      (m===meseVis ? ' attivo' : '');
    btn.textContent = MESI[m].slice(0,3).toUpperCase();
    btn.onclick = () => {
      document.querySelectorAll('.mese-tab').forEach(b=>b.classList.remove('attivo'));
      btn.classList.add('attivo');
      meseVis = m;
      renderCal(m);
    };
    nav.appendChild(btn);
  }
  setTimeout(()=>{
    const a = nav.querySelector('.attivo');
    if(a) a.scrollIntoView({behavior:'smooth',inline:'center',block:'nearest'});
  }, 50);
}

function renderCal(mese) {
  const oggi = new Date(); oggi.setHours(0,0,0,0);
  const anno = 2026;

  if (!MESI_CON_DATI.has(mese)) {
    document.getElementById('calSection').innerHTML =
      `<div class="cal-titolo">${MESI[mese]} ${anno}</div>
       <p class="mese-vuoto">Nessun dato disponibile per questo mese.<br>Il calendario copre marzo â€“ dicembre 2026.</p>`;
    return;
  }

  const ultimoGiorno = new Date(anno, mese+1, 0).getDate();
  let html = `<div class="cal-titolo">${MESI[mese]} ${anno}</div>`;

  for (let g=1; g<=ultimoGiorno; g++) {
    const data = new Date(anno, mese, g);
    const r = raccoltaDelGiorno(data);
    if (!r.length) continue;
    const isOggi = data.getTime()===oggi.getTime();
    const isPass = data < oggi;
    html += `<div class="giorno-row${isOggi?' oggi-row':''}${isPass?' passato':''}">
      <div class="data-col">
        <div class="data-num">${g}</div>
        <div class="data-nome">${GIORNI_B[data.getDay()]}</div>
        ${isOggi?'<div class="oggi-badge">Oggi</div>':''}
      </div>
      <div class="sep"></div>
      <div class="tipi-col">${r.map(t=>chipHTML(t,true)).join('')}</div>
    </div>`;
  }

  document.getElementById('calSection').innerHTML = html;

  if (mese===oggi.getMonth()) {
    const oggiRow = document.querySelector('.oggi-row');
    if (oggiRow) setTimeout(()=>oggiRow.scrollIntoView({behavior:'smooth',block:'center'}),120);
  }
}

// NOTIFICHE
let notificheAttive = false;
function mostraToast(msg) {
  const t=document.getElementById('toast');
  t.textContent=msg; t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),3000);
}
async function toggleNotifiche() {
  if (!('Notification' in window)) { mostraToast('âš ï¸ Notifiche non supportate'); return; }
  if (notificheAttive) {
    notificheAttive=false;
    document.getElementById('notifBtn').classList.remove('active');
    localStorage.setItem('notifiche','0');
    mostraToast('ğŸ”• Notifiche disattivate'); return;
  }
  const perm = await Notification.requestPermission();
  if (perm==='granted') {
    notificheAttive=true;
    document.getElementById('notifBtn').classList.add('active');
    localStorage.setItem('notifiche','1');
    mostraToast('ğŸ”” Notifiche attivate! Ti avviserÃ² la sera prima');
    scheduleNotifica();
  } else { mostraToast('âš ï¸ Permesso notifiche negato'); }
}
function scheduleNotifica() {
  const ora=new Date();
  const stasera=new Date(); stasera.setHours(21,0,0,0);
  const domani=new Date(ora); domani.setDate(ora.getDate()+1); domani.setHours(0,0,0,0);
  const r=raccoltaDelGiorno(domani);
  if (r.length && stasera-ora>0) {
    setTimeout(()=>{
      new Notification('ğŸ—‘ï¸ EcoRaccolta â€“ Cazzago',{
        body:`Domani: ${r.map(t=>TIPI[t].nome).join(', ')}\nMetti fuori i contenitori stasera!`
      });
    }, stasera-ora);
  }
}

// INIT
document.addEventListener('DOMContentLoaded',()=>{
  renderProssima();
  renderNav();
  renderCal(meseVis);
  if (localStorage.getItem('notifiche')==='1' && 'Notification' in window
      && Notification.permission==='granted') {
    notificheAttive=true;
    document.getElementById('notifBtn').classList.add('active');
    scheduleNotifica();
  }
  setInterval(()=>{ renderProssima(); if(notificheAttive) scheduleNotifica(); }, 3600000);
});
</script>
</body>
</html>
